{% extends "layouts/base.html"%}

{% block content %}
<div class="container p-3">
    <div class="row justify-content-center">
        <div class="col-10  m-5">
            <h3>Crear y agregar nuevos datos</h3>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-sourse-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-sourse" type="button" role="tab" aria-controls="pills-sourse"
                        aria-selected="true">Recursos</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-categories-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-categories" type="button" role="tab" aria-controls="pills-categories"
                        aria-selected="false">Categorias</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-client-tab" data-bs-toggle="pill" data-bs-target="#pills-client"
                        type="button" role="tab" aria-controls="pills-client" aria-selected="false">Clientes</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-config-tab" data-bs-toggle="pill" data-bs-target="#pills-config"
                        type="button" role="tab" aria-controls="pills-config"
                        aria-selected="false">Configuración</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-instance-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-instance" type="button" role="tab" aria-controls="pills-instance"
                        aria-selected="false">Instancias</button>
                </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade  show active" id="pills-sourse" role="tabpanel"
                    aria-labelledby="pills-sourse-tab" tabindex="0">
                    <form class="row g-3" method="POST" action="{% url 'crearRecurso' %}">
                        {% csrf_token %}
                        <div class="col-md-2">
                            <label for="id" class="form-label">ID</label>
                            <input type="text" class="form-control" id="id" name="id" required>
                        </div>
                        <div class="col-md-10">
                            <label for="name" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="abbreviation" class="form-label">Abreviatura</label>
                            <input type="text" class="form-control" id="abbreviation" name="abbreviation" required>
                        </div>
                        <div class="col-md-6">
                            <label for="metrics" class="form-label">Métrica</label>
                            <input type="text" class="form-control" id="metrics" name="metrics" required>
                        </div>
                        <div class="col-md-6">
                            <label for="type" class="form-label">Tipo</label>
                            <input type="text" class="form-control" id="type" name="type" required>
                        </div>
                        <div class="col-md-6">
                            <label for="value" class="form-label">Valor por hora</label>
                            <input type="mumber" class="form-control" id="value" name="value" value="0" required>
                        </div>
                        <div class="col-12">
                            <button class="btn btn-primary" type="submit">Crear</button>
                        </div>
                    </form>
                </div>
                <div class="tab-pane fade" id="pills-categories" role="tabpanel" aria-labelledby="pills-categorie-tab"
                    tabindex="0">
                    <form class="row g-3" method="POST" action="{% url 'crearCategoria' %}">
                        {% csrf_token %}
                        <div class="col-md-2">
                            <label for="id" class="form-label">ID</label>
                            <input type="text" class="form-control" id="id" name="id" required>
                        </div>
                        <div class="col-md-10">
                            <label for="name" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="col-md-12">
                            <label for="description" class="form-label">Descripción</label>
                            <textarea class="form-control" id="description" name="description" required></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="work" class="form-label">Carga trabajo</label>
                            <input type="text" class="form-control" id="work" name="work" required>
                        </div>
                        <div class="col-12">
                            <button class="btn btn-primary" type="submit">Crear</button>
                        </div>
                    </form>
                </div>
                <div class="tab-pane fade" id="pills-client" role="tabpanel" aria-labelledby="pills-client-tab"
                    tabindex="0">
                    <form class="row g-3" method="POST" action="{% url 'crearCliente' %}">
                        {% csrf_token %}
                        <div class="col-md-2">
                            <label for="nit" class="form-label">NIT</label>
                            <input type="text" class="form-control" id="nit" name="nit" required>
                        </div>
                        <div class="col-md-10">
                            <label for="name" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="user" class="form-label">Usuario</label>
                            <input type="text" class="form-control" id="user" name="user" required>
                        </div>
                        <div class="col-md-6">
                            <label for="code" class="form-label">Clave</label>
                            <input type="text" class="form-control" id="code" name="code" required>
                        </div>
                        <div class="col-md-6">
                            <label for="address" class="form-label">Dirección domiciliar</label>
                            <input type="text" class="form-control" id="address" name="address" required>
                        </div>
                        <div class="col-md-6">
                            <label for="mail" class="form-label">Correo electronico</label>
                            <input type="email" class="form-control" id="mail" name="mail" required>
                        </div>
                        <div class="col-12">
                            <button class="btn btn-primary" type="submit">Crear</button>
                        </div>
                    </form>
                </div>
                <div class="tab-pane fade" id="pills-config" role="tabpanel" aria-labelledby="pills-config-tab"
                    tabindex="0">
                    <form class="row g-3" method="POST" action="{% url 'crearConfiguracion' %}">
                        {% csrf_token %}
                        <div class="col-md-2">
                            <label for="categoria" class="form-label">Categoria</label>
                            <select class="form-select" aria-label="Default select example" id="categoria"
                                name="categoria" required>
                                {%for Categoria in Categorias%}
                                <option value="{{Categoria.id}}">{{Categoria.id}} - {{Categoria.nombre}}</option>
                                {%endfor%}
                            </select>

                        </div>
                        <div class="col-md-2">
                            <label for="id" class="form-label">ID</label>
                            <input type="text" class="form-control" id="id" name="id" required>
                        </div>
                        <div class="col-md-8">
                            <label for="name" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="col-md-12">
                            <label for="description" class="form-label">Descripción</label>
                            <textarea class="form-control" id="description" name="description" required></textarea>
                        </div>
                        <div class="col-12">
                            <button class="btn btn-primary" type="submit">Crear</button>
                        </div>
                    </form>
                </div>
                <div class="tab-pane fade" id="pills-instance" role="tabpanel" aria-labelledby="pills-instance-tab"
                    tabindex="0">
                    <ul class="nav nav-pills mb-3" id="sub-pills-intance" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="pills-new-tab" data-bs-toggle="pill"
                                data-bs-target="#pills-new" type="button" role="tab" aria-controls="pills-new"
                                aria-selected="true">Crear</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-cancel-tab" data-bs-toggle="pill"
                                data-bs-target="#pills-cancel" type="button" role="tab" aria-controls="pills-cancel"
                                aria-selected="false">Cancelar</button>
                        </li>

                    </ul>
                    <div class="tab-content" id="sub-pills-tabContent">
                        <div class="tab-pane fade  show active" id="pills-new" role="tabpanel"
                            aria-labelledby="pills-new" tabindex="0">
                            <h4>Crear instancia</h4>
                            <form class="row g-3" method="POST" action="{% url 'crearInstancia' %}">
                                {% csrf_token %}
                                <div class="col-md-2">
                                    <label for="cliente" class="form-label">Cliente</label>
                                    <select class="form-select" aria-label="Default select example" id="cliente"
                                        name="cliente" required>
                                        {%for Cliente in Clientes%}
                                        <option value="{{Cliente.nit}}">{{Cliente.nombre}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="id_instance" class="form-label">ID</label>
                                    <input type="text" class="form-control" id="id_instance" name="id_instance" required>
                                </div>
                                <div class="col-md-8">
                                    <label for="name" class="form-label">Nombre</label>
                                    <input type="text" class="form-control" id="name" name="name" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="configuration" class="form-label">Configuración</label>
                                    <select class="form-select" aria-label="Default select example" id="configuration"
                                        name="configuration" required>

                                        {%for Categoria in Categorias%}
                                        {%for Configuracion in Categoria.configuraciones %}
                                        <option value="{{Configuracion.id}}">{{Configuracion.id}} -
                                            {{Configuracion.nombre}}</option>
                                        {%endfor%}
                                        {%endfor%}
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="dateInit" class="form-label">Fecha Inicio</label>
                                    <input type="date" class="form-control" id="dateInit" name="dateInit" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="estado" class="form-label">Estado</label>
                                    <select class="form-select" aria-label="Default select example" id="estado"
                                        name="estado" required>
                                        <option value="1">Vigente</option>
                                        <option value="2">Cancelada</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="dateEnd" class="form-label">Fecha Fin (si la instancia esta
                                        cancelada)</label>
                                    <input type="date" class="form-control" id="dateEnd" name="dateEnd">
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-primary" type="submit">Crear</button>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="pills-cancel" role="tabpanel" aria-labelledby="pills-cancel-tab"
                            tabindex="0">
                            <h4>Cancelar instancia</h4>
                            <form class="row g-3" method="POST" action="{% url 'cancelarInstancia' %}">
                                {% csrf_token %}
                                <div class="col-md-7">
                                    <label for="id" class="form-label">Seleccionar instancia</label>
                                    
                                    <select name="instancia" id="instancia">
                                        {%for Cliente in Clientes%}
                                        <optgroup label="{{Cliente.nombre}}">
                                            {%for Instancia in Cliente.instancias%}
                                            <option value="{{Cliente.nit}};{{Instancia.id}}">ID: {{Instancia.id}},
                                                Nombre:{{Instancia.nombre}}</option>
                                            {%endfor%}
                                        </optgroup>
                                        {%endfor%}
                                    </select>
                                    
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-primary" type="submit">Cancelar</button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}